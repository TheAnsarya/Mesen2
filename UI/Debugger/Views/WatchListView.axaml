<UserControl
	xmlns="https://github.com/avaloniaui"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:c="using:Nexen.Debugger.Controls"
	xmlns:v="using:Nexen.Debugger.Views"
	xmlns:vm="using:Nexen.Debugger.ViewModels"
	xmlns:md="using:Nexen.Debugger"
	xmlns:l="using:Nexen.Localization"
	xmlns:ext="using:Nexen.Controls.DataGridExtensions"
	mc:Ignorable="d" d:DesignWidth="300" d:DesignHeight="110"
	VerticalAlignment="Stretch"
	HorizontalAlignment="Stretch"
	Focusable="True"
	x:DataType="vm:WatchListViewModel"
	x:Class="Nexen.Debugger.Views.WatchListView"
>
	<Design.DataContext>
		<vm:WatchListViewModel />
	</Design.DataContext>

	<UserControl.Styles>
		<Style Selector="TextBox">
			<Setter Property="Margin" Value="1 0 0 0" />
			<Setter Property="Padding" Value="3 0 0 0" />
			<Setter Property="MinHeight" Value="16" />
			<Setter Property="Height" Value="16" />
			<Setter Property="BorderThickness" Value="0" />
			<Setter Property="VerticalAlignment" Value="Center" />
			<Setter Property="Background" Value="Transparent" />
		</Style>
		<Style Selector="DataGridRow TextBox:pointerover Border#PART_BorderElement">
			<Setter Property="Background" Value="Transparent" />
		</Style>
		<Style Selector="DataGridRow TextBox:pointerover:focus Border#PART_BorderElement">
			<Setter Property="Background" Value="{DynamicResource ThemeBackgroundBrush}" />
		</Style>
		<Style Selector="DataGridRow:selected TextBox">
			<Setter Property="Foreground" Value="White" />
		</Style>
		<Style Selector="DataGridRow:selected TextBox:focus">
			<Setter Property="Background" Value="{DynamicResource ThemeBackgroundBrush}" />
			<Setter Property="Foreground" Value="{DynamicResource ThemeForegroundBrush}" />
		</Style>
		<Style Selector="TextBlock.changed">
			<Setter Property="Foreground" Value="{DynamicResource ErrorBrush}" />
		</Style>
		<Style Selector="DataGridRow:selected TextBlock.changed">
			<Setter Property="Foreground" Value="White" />
		</Style>
	</UserControl.Styles>

	<Border BorderThickness="0 1 0 0" BorderBrush="{StaticResource NexenGrayBorderColor}">
		<DataGrid
			Name="WatchList"
			ItemsSource="{Binding WatchEntries}"
			SelectedItem="{Binding Selection.SelectedItem}"
			SelectionMode="Extended"
			IsReadOnly="True"
			CanUserReorderColumns="False"
			HeadersVisibility="Column"
			GridLinesVisibility="All"
			ext:DataGridColumnWidthBehavior.ColumnWidths="{Binding ColumnWidths}"
		>
			<DataGrid.Columns>
				<DataGridTemplateColumn Header="{l:Translate colName}" CanUserResize="True" Width="200">
					<DataTemplate>
						<v:WatchListTextBox
							Classes="PreventShortcuts"
							Name="WatchTextBox"
							ContextFlyout="{x:Null}"
							ContextRequested="OnEntryContextRequested"
							Text="{Binding Expression, DataType={x:Type md:WatchValueInfo}}"
							LostFocus="OnEntryLostFocus"
							KeyDown="OnEntryKeyDown"
							Watermark="Click to add..."
						/>
					</DataTemplate>
				</DataGridTemplateColumn>
				<DataGridTemplateColumn Header="{l:Translate colValue}" CanUserResize="True" Width="100">
					<DataTemplate>
						<TextBlock
							Padding="3 0 0 0"
							VerticalAlignment="Center"
							x:DataType="md:WatchValueInfo"
							Text="{Binding Value}"
							Classes.changed="{Binding IsChanged}"
						/>
					</DataTemplate>
				</DataGridTemplateColumn>
			</DataGrid.Columns>
		</DataGrid>
	</Border>
</UserControl>
